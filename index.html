<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="theme-color" content="#0B0F17"/>

  <title>Камчатская красная икра — Москва</title>
  <meta name="description" content="Камчатская красная икра высшей категории. Москва/МО/Троицк/Новые Ватутинки. Фирменная и свежая фасовка. Документы по запросу."/>

  <meta property="og:title" content="Камчатская красная икра высшей категории"/>
  <meta property="og:description" content="Москва/МО/Троицк/Новые Ватутинки. Прайс + быстрый заказ в WhatsApp/Telegram."/>
  <meta property="og:type" content="website"/>
  <meta property="og:locale" content="ru_RU"/>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@450;500;600;700;800;900&display=swap" rel="stylesheet">

  <link rel="preload" as="image" href="hero.webp" type="image/webp">

  <style>
    :root{
      --bg:#ffffff;
      --soft:#f6f8fb;
      --ink:#0b0f17;
      --muted:#3a4453;
      --border:#e6e8ee;
      --red:#e10613;

      --shadow: 0 18px 55px rgba(11,15,23,.08);
      --shadow2: 0 28px 90px rgba(11,15,23,.14);
      --ease: cubic-bezier(.2,.9,.2,1);

      --fs-h1: clamp(40px, 5vw, 66px);
      --fs-h2: clamp(28px, 3.1vw, 38px);
      --fs-body: 16px;
      --fs-small: 13px;
      --fs-mini: 12px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Inter", Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--ink);
      font-size:var(--fs-body);
      line-height:1.65;
      letter-spacing:-0.01em;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
      background:
        radial-gradient(circle at 1px 1px, rgba(11,15,23,.04) 1px, transparent 1.2px) 0 0 / 18px 18px,
        radial-gradient(circle at 1px 1px, rgba(225,6,19,.03) 1px, transparent 1.2px) 9px 9px / 22px 22px;
      mix-blend-mode:multiply;
      opacity:.33;
    }

    header, main, footer, section, .stickybar, .modal, .toast-wrap { position:relative; z-index:2; }

    a{color:inherit; text-decoration:none}
    img{max-width:100%; height:auto}
    .container{max-width:1120px; margin:0 auto; padding:0 16px}
    .divider{border-top:1px solid var(--border)}
    .soft{background:var(--soft)}

    :focus { outline:none; }
    :focus-visible{
      outline: 2px solid rgba(225,6,19,.22);
      outline-offset: 4px;
      border-radius: 14px;
    }

    /* ===== Micro reveal (premium scroll) ===== */
    .reveal{
      opacity:0;
      transform: translateY(14px);
      transition: opacity .6s var(--ease), transform .6s var(--ease);
      will-change: opacity, transform;
    }
    .reveal.in{ opacity:1; transform: translateY(0); }
    .reveal.delay-1{ transition-delay: .06s; }
    .reveal.delay-2{ transition-delay: .12s; }
    .reveal.delay-3{ transition-delay: .18s; }

    /* ===== Buttons ===== */
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      border-radius:18px;
      padding:14px 18px;
      font-weight:850;
      font-size:14px;
      letter-spacing:-0.01em;
      border:1px solid transparent;
      cursor:pointer;
      user-select:none;
      transition: transform .18s var(--ease), box-shadow .22s var(--ease), border-color .22s var(--ease), color .22s var(--ease), background .22s var(--ease);
      will-change: transform;
      background:transparent;
      white-space:nowrap;
    }
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:var(--ink); color:#fff; border-color:var(--ink); box-shadow: 0 18px 50px rgba(11,15,23,.18);}
    .btn-primary:hover{transform:translateY(-1px); box-shadow: 0 22px 70px rgba(225,6,19,.18);}
    .btn-secondary{background:#fff; color:var(--ink); border-color:var(--ink);}
    .btn-secondary:hover{transform:translateY(-1px); border-color:rgba(225,6,19,.55); color:var(--red); box-shadow: 0 16px 40px rgba(225,6,19,.10);}
    .btn-ghost{background:transparent; color:var(--muted); border-color:var(--border);}
    .btn-ghost:hover{transform:translateY(-1px); color:var(--ink); border-color: rgba(11,15,23,.22);}

    /* ===== Header ===== */
    header{
      position:sticky; top:0;
      background:rgba(255,255,255,.78);
      backdrop-filter: blur(12px);
      border-bottom:1px solid var(--border);
      z-index:50;
    }
    .header-row{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px;
      padding:14px 0;
    }
    nav{display:none; gap:18px; align-items:center}
    nav a{font-size:var(--fs-small); font-weight:850; color:var(--muted)}
    nav a:hover{color:var(--ink)}

    .brand{display:flex; align-items:center}
    .brand img{
      width:100px; height:100px;
      object-fit:contain;
      filter: drop-shadow(0 14px 30px rgba(11,15,23,.12));
      transition: transform .22s var(--ease), filter .22s var(--ease);
      will-change: transform;
    }
    .brand img:hover{
      transform: translateY(-1px) scale(1.02);
      filter: drop-shadow(0 18px 40px rgba(225,6,19,.12)) drop-shadow(0 14px 30px rgba(11,15,23,.14));
    }

    .header-actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .header-phone{
      display:none;
      font-size:13px; font-weight:900;
      color:var(--muted);
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:18px;
      background:#fff;
    }
    .header-phone:hover{color:var(--ink); border-color:rgba(11,15,23,.22)}

    /* ===== Hero ===== */
    .hero{padding:58px 0 28px; position:relative; overflow:hidden}
    .blob1,.blob2{
      position:absolute; border-radius:999px; filter:blur(70px);
      pointer-events:none; opacity:.07; z-index:0;
      animation: floaty 12s var(--ease) infinite alternate;
    }
    .blob1{width:420px; height:420px; right:-140px; top:-90px; background:var(--red)}
    .blob2{width:520px; height:520px; left:-200px; top:120px; background:var(--ink); opacity:.05; animation-duration: 14s}
    @keyframes floaty{from{transform:translate3d(0,0,0)} to{transform:translate3d(0,18px,0)}}

    .hero-grid{display:grid; gap:26px; align-items:center}
    h1,h2,h3{margin:0; font-weight:900; letter-spacing:-0.03em; line-height:1.1}
    h1{font-size:var(--fs-h1)}
    h2{font-size:var(--fs-h2); letter-spacing:-0.02em}
    .grad{
      background:linear-gradient(180deg, var(--ink), #1b2230);
      -webkit-background-clip:text; background-clip:text;
      color:transparent;
    }

    .lead{
      margin-top:16px;
      color:var(--muted);
      max-width:62ch;
      font-weight:500;
    }

    .pillbar{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      font-size:var(--fs-mini);
      font-weight:900;
      letter-spacing:-0.005em;
    }
    .dot{width:10px; height:10px; border-radius:999px; background:var(--red)}
    .dot.ok{background:#16a34a}
    .dot.warn{background:#f59e0b}

    .cta-row{margin-top:18px; display:flex; gap:12px; flex-wrap:wrap}

    .visual{
      border:1px solid var(--border);
      background:#fff;
      border-radius:40px;
      padding:14px;
      box-shadow: 0 30px 90px rgba(11,15,23,.10);
      position:relative;
      overflow:hidden;
    }
    .visual::after{
      content:"";
      position:absolute; inset:-40% -40%;
      background: radial-gradient(circle at 30% 30%, rgba(225,6,19,.08), transparent 55%);
      transform: rotate(12deg);
      pointer-events:none;
    }
    .hero-photo{
      width:100%;
      height:460px;
      object-fit:cover;
      border-radius:28px;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      background: var(--soft);
      cursor: zoom-in;
      transition: transform .32s var(--ease), filter .32s var(--ease);
      will-change: transform;
      display:block;
      margin-top:12px;
    }
    .visual:hover .hero-photo{
      transform: scale(1.01);
      filter: saturate(1.05) contrast(1.02);
    }
    .mini-grid{
      margin-top:12px;
      display:grid;
      gap:10px;
      grid-template-columns:repeat(3, minmax(0, 1fr));
      align-items:stretch;
    }
    .mini{
      border:1px solid var(--border);
      background:var(--soft);
      border-radius:18px;
      padding:12px 12px;
      min-height:72px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      overflow:hidden;
    }
    .mini .t{
      font-size:11px;
      letter-spacing:0.14em;
      text-transform:uppercase;
      font-weight:950;
      color:var(--muted);
      line-height:1.1;
    }
    .mini .v{
      margin-top:6px;
      font-size:12px;
      font-weight:950;
      letter-spacing:-0.01em;
      line-height:1.25;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    /* ===== Gallery (3 photos) ===== */
    .gallery{ margin-top:18px; display:grid; gap:14px; grid-template-columns: 1fr; }
    .gallery-grid{
      margin-top:14px;
      display:grid;
      gap:14px;
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    .gcard{
      border:1px solid var(--border);
      background:#fff;
      border-radius:24px;
      overflow:hidden;
      box-shadow: var(--shadow);
      transition: transform .22s var(--ease), box-shadow .22s var(--ease), border-color .22s var(--ease);
      cursor: zoom-in;
      position:relative;
      isolation:isolate;
    }
    .gcard:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow2);
      border-color: rgba(225,6,19,.25);
    }
    .gmedia{
      position:relative;
      aspect-ratio: 16 / 11;
      background:#eef1f6;
      overflow:hidden;
    }
    .gmedia::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 18% 18%, rgba(225,6,19,.14), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,0) 48%),
        linear-gradient(180deg, rgba(11,15,23,.00), rgba(11,15,23,.20));
      pointer-events:none;
      opacity:.95;
    }
    .gmedia img{
      width:100%; height:100%;
      object-fit:cover;
      transform: scale(1.02);
      transition: transform .45s var(--ease), filter .45s var(--ease);
      filter: saturate(.98) contrast(1.06) brightness(1.01);
      display:block;
    }
    .gcard:hover .gmedia img{
      transform: scale(1.07);
      filter: saturate(1.05) contrast(1.08) brightness(1.03);
    }
    .gcap{
      padding:12px 14px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .gcap .t{
      font-size:12px;
      font-weight:950;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--muted);
      line-height:1.2;
    }
    .gcap .dot{
      width:10px;height:10px;border-radius:99px;background:var(--red);
      box-shadow:0 10px 30px rgba(225,6,19,.18);
    }
    @media (max-width: 860px){
      .gallery-grid{ grid-template-columns: 1fr; }
    }

    /* ===== Sections ===== */
    .section{padding:56px 0}
    .kicker{
      font-size:var(--fs-mini);
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--muted);
      font-weight:900;
    }
    .sub{margin-top:12px; color:var(--muted); max-width:78ch}

    /* ===== Price ===== */
    .row-between{display:flex; align-items:flex-end; justify-content:space-between; gap:16px; flex-wrap:wrap}
    .tabs{
      display:inline-flex; gap:6px;
      padding:6px;
      border:1px solid var(--border);
      background:#fff;
      border-radius:18px;
      box-shadow: var(--shadow);
    }
    .tab{
      border:0; background:transparent; cursor:pointer;
      padding:10px 12px;
      border-radius:16px;
      font-weight:900;
      font-size:13px;
      color:var(--muted);
      transition: background .2s var(--ease), color .2s var(--ease), transform .2s var(--ease);
    }
    .tab:hover{color:var(--ink); transform:translateY(-1px)}
    .tab.active{background:var(--ink); color:#fff; box-shadow: 0 10px 30px rgba(11,15,23,.18);}

    .grid{margin-top:18px; display:grid; gap:14px; grid-template-columns:repeat(1,1fr)}
    .card{
      border:1px solid var(--border);
      background:#fff;
      border-radius:24px;
      padding:18px;
      box-shadow: var(--shadow);
      transition: transform .22s var(--ease), box-shadow .22s var(--ease), border-color .22s var(--ease);
    }
    .card:hover{transform:translateY(-2px); box-shadow: var(--shadow2); border-color: rgba(225,6,19,.25);}
    .title{display:flex; align-items:center; gap:10px; font-size:16px; font-weight:950; letter-spacing:-0.02em;}
    .badge{display:inline-flex; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:950; background:var(--soft); border:1px solid var(--border); margin-top:10px;}

    .rows{margin-top:14px; display:flex; flex-direction:column; gap:10px}
    .row{
      border:1px solid var(--border);
      border-radius:16px;
      padding:12px 14px;
      display:flex; justify-content:space-between; align-items:center;
      background:#fff;
    }
    .w{font-size:13px; font-weight:850; color:var(--muted)}
    .p{font-size:16px; font-weight:950; letter-spacing:-0.01em; font-variant-numeric: tabular-nums slashed-zero;}

    .note{
      margin-top:16px;
      border:1px solid var(--border);
      background:#fff;
      border-radius:28px;
      padding:18px;
      box-shadow: var(--shadow);
      display:flex; gap:14px; align-items:flex-start;
    }
    .note .icon{
      width:40px; height:40px; border-radius:16px;
      display:grid; place-items:center;
      font-weight:950; color:#fff;
      background:var(--ink);
      flex:0 0 auto;
    }
    .note .h{font-weight:950; letter-spacing:-0.01em}
    .note .d{margin-top:4px; color:var(--muted)}

    /* ===== Order + Cart ===== */
    .order-wrap{display:grid; gap:14px; grid-template-columns:1fr; margin-top:18px}
    .panel{
      border:1px solid var(--border);
      border-radius:28px;
      padding:18px;
      background:#fff;
      box-shadow: var(--shadow);
    }
    .panel h3{margin:0; font-size:18px; font-weight:950; letter-spacing:-0.02em}
    .hint{margin-top:8px; color:var(--muted); font-size:13px; line-height:1.6}

    .form{margin-top:14px; display:grid; gap:12px; grid-template-columns:1fr}
    .field{display:grid; gap:6px}
    .label{
      font-size:12px;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--muted);
      font-weight:900;
    }
    select, input{
      width:100%;
      border:1px solid var(--border);
      border-radius:16px;
      padding:12px 12px;
      font:inherit;
      font-weight:600;
      letter-spacing:-0.01em;
      background:#fff;
      transition:border-color .2s var(--ease), box-shadow .2s var(--ease);
    }
    select:focus, input:focus{
      border-color: rgba(225,6,19,.22);
      box-shadow: 0 14px 50px rgba(225,6,19,.10);
    }

    .summary{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .total{
      flex:1 1 240px;
      border:1px solid var(--border);
      background:var(--soft);
      border-radius:18px;
      padding:12px 14px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .total .t{font-size:12px; font-weight:950; letter-spacing:0.08em; text-transform:uppercase; color:var(--muted)}
    .total .v{font-size:18px; font-weight:950; letter-spacing:-0.02em; font-variant-numeric: tabular-nums slashed-zero}

    .actions-row{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .actions-row .btn{flex:1 1 220px}

    .cart{
      margin-top:14px;
      display:grid;
      gap:10px;
    }
    .cart-empty{
      border:1px dashed rgba(11,15,23,.18);
      background: linear-gradient(180deg, #fff, #fbfcff);
      border-radius:18px;
      padding:14px;
      color:var(--muted);
      font-weight:850;
    }
    .cart-item{
      border:1px solid var(--border);
      background:#fff;
      border-radius:18px;
      padding:12px 12px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .cart-left{min-width:0}
    .cart-name{
      font-weight:950;
      letter-spacing:-0.02em;
      line-height:1.2;
      font-size:14px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .cart-meta{
      margin-top:6px;
      color:var(--muted);
      font-size:12px;
      font-weight:850;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .cart-right{
      display:flex;
      align-items:center;
      gap:10px;
      flex:0 0 auto;
    }
    .qty{
      display:inline-flex;
      align-items:center;
      gap:6px;
      border:1px solid var(--border);
      background:var(--soft);
      border-radius:14px;
      padding:6px;
    }
    .qbtn{
      width:34px;height:34px;
      border-radius:12px;
      border:1px solid var(--border);
      background:#fff;
      font-weight:950;
      cursor:pointer;
      transition: transform .16s var(--ease), border-color .2s var(--ease);
    }
    .qbtn:hover{transform:translateY(-1px); border-color: rgba(225,6,19,.25);}
    .qnum{
      min-width:26px;
      text-align:center;
      font-weight:950;
      font-variant-numeric: tabular-nums slashed-zero;
    }
    .delbtn{
      width:40px;height:40px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      cursor:pointer;
      font-weight:950;
      transition: transform .16s var(--ease), border-color .2s var(--ease), color .2s var(--ease);
      color:var(--muted);
    }
    .delbtn:hover{transform:translateY(-1px); border-color: rgba(225,6,19,.25); color:var(--red);}

    .channel{
      margin-top:12px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .seg{
      display:inline-flex;
      padding:6px;
      gap:6px;
      border:1px solid var(--border);
      background:#fff;
      border-radius:18px;
      box-shadow: var(--shadow);
    }
    .seg button{
      border:0; background:transparent; cursor:pointer;
      padding:10px 12px;
      border-radius:16px;
      font-weight:950;
      font-size:13px;
      color:var(--muted);
      transition: background .2s var(--ease), color .2s var(--ease), transform .2s var(--ease);
    }
    .seg button:hover{color:var(--ink); transform:translateY(-1px)}
    .seg button.active{background:var(--ink); color:#fff; box-shadow: 0 10px 30px rgba(11,15,23,.18);}

    /* ===== Trust ===== */
    .trust{ margin-top:18px; display:grid; gap:12px; grid-template-columns: 1fr; }
    .trust-item{
      border:1px solid var(--border);
      background:#fff;
      border-radius:24px;
      padding:16px 16px;
      box-shadow: var(--shadow);
    }
    .trust-item .t{font-size:12px; letter-spacing:0.14em; text-transform:uppercase; color:var(--muted); font-weight:950}
    .trust-item .v{margin-top:8px; font-size:15px; font-weight:900; letter-spacing:-0.02em}
    .trust-item .d{margin-top:6px; color:var(--muted); font-size:13px}

    /* ===== Reviews (soon) ===== */
    .reviews-grid{ margin-top:18px; display:grid; gap:14px; grid-template-columns: 1fr; }
    .review-card{
      border:1px solid var(--border);
      background:#fff;
      border-radius:28px;
      padding:18px;
      box-shadow: var(--shadow);
    }
    .review-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .review-badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      font-weight:950;
      font-size:12px;
      border:1px solid var(--border);
      background:var(--soft);
      color:var(--muted);
      letter-spacing:-0.01em;
    }
    .review-actions{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    /* =========================
       DEPARTMENTS — PREMIUM VITRINE (text under photo)
       ========================= */
    .dept-grid{ margin-top:18px; display:grid; gap:16px; }
    @media (min-width:1100px){ .dept-grid{ grid-template-columns: repeat(4, minmax(0,1fr)); } }
    @media (min-width:720px) and (max-width:1099px){ .dept-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (max-width:719px){ .dept-grid{ grid-template-columns: 1fr; } }

    .dept-card{
      border:1px solid var(--border);
      background:#fff;
      border-radius:28px;
      overflow:hidden;
      box-shadow: var(--shadow);
      transition: transform .22s var(--ease), box-shadow .22s var(--ease), border-color .22s var(--ease);
      position:relative;
      isolation:isolate;
    }
    .dept-card:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow2);
      border-color: rgba(225,6,19,.25);
    }
    .dept-card:active{ transform: translateY(0px); }

    .dept-media{
      position:relative;
      aspect-ratio: 16 / 11;
      background: #eef1f6;
      overflow:hidden;
    }
    .dept-media::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 18% 18%, rgba(225,6,19,.18), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,0) 48%),
        linear-gradient(180deg, rgba(11,15,23,.00), rgba(11,15,23,.22));
      pointer-events:none;
      opacity:.95;
    }
    .dept-media::before{
      content:"";
      position:absolute;
      inset:-30% -60%;
      background: linear-gradient(115deg, transparent 40%, rgba(255,255,255,.22) 50%, transparent 60%);
      transform: translateX(-30%);
      opacity:0;
      transition: opacity .25s var(--ease), transform .55s var(--ease);
      pointer-events:none;
    }
    .dept-card:hover .dept-media::before{ opacity:1; transform: translateX(30%); }

    .dept-media img{
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center;
      transform: scale(1.02);
      transition: transform .45s var(--ease), filter .45s var(--ease);
      filter: saturate(.98) contrast(1.06) brightness(1.01);
      display:block;
    }
    .dept-card:hover .dept-media img{
      transform: scale(1.07);
      filter: saturate(1.05) contrast(1.08) brightness(1.03);
    }

    .dept-badge{
      position:absolute;
      top:12px; left:12px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      font-weight:950;
      font-size:12px;
      letter-spacing:-0.01em;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(11,15,23,.86);
      color:#fff;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 50px rgba(11,15,23,.20);
      z-index:2;
    }
    .dept-badge.live{ background: rgba(22,163,74,.92); }
    .dept-badge span.dot{ width:9px; height:9px; border-radius:99px; background:#fff; opacity:.95; }

    .dept-body{
      padding:16px 16px 14px;
      min-height: 160px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
    }

    .dept-title{
      font-size:18px;
      font-weight:950;
      letter-spacing:-0.02em;
      line-height:1.15;
      margin:0;
      min-height: 44px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .dept-desc{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
      min-height: 42px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .dept-footer{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .dept-status{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:900;
      letter-spacing:-0.01em;
      color:var(--muted);
    }

    .dept-arrow{
      width:44px; height:44px;
      border-radius:16px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, #fff, #fbfcff);
      box-shadow: 0 14px 40px rgba(11,15,23,.08);
      display:grid;
      place-items:center;
      transition: transform .22s var(--ease), border-color .22s var(--ease), box-shadow .22s var(--ease);
      flex:0 0 auto;
    }
    .dept-card:hover .dept-arrow{
      transform: translateY(-1px);
      border-color: rgba(225,6,19,.25);
      box-shadow: 0 20px 70px rgba(225,6,19,.12);
    }
    .dept-arrow svg{
      width:18px; height:18px;
      stroke: var(--ink);
      transition: transform .22s var(--ease), stroke .22s var(--ease);
    }
    .dept-card:hover .dept-arrow svg{ transform: translateX(2px); stroke: var(--red); }

    .dept-card.soon{ cursor: default; }
    .dept-card.soon:hover{ transform:none; box-shadow: var(--shadow); border-color: var(--border); }
    .dept-card.soon .dept-arrow{ opacity:.55; }

    .dept-media.pos-top img{ object-position: 50% 25%; }
    .dept-media.pos-low img{ object-position: 50% 70%; }

    /* ===== Dark delivery ===== */
    .dark{
      background:var(--ink);
      color:#fff;
      position:relative;
      overflow:hidden;
    }
    .dark::before{
      content:"";
      position:absolute; inset:-30%;
      background: radial-gradient(circle at 30% 30%, rgba(225,6,19,.14), transparent 55%);
      opacity:.35;
      pointer-events:none;
    }
    .dark .kicker{color:rgba(255,255,255,.65)}
    .dark .sub{color:rgba(255,255,255,.80)}
    .dark .panel{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      box-shadow: 0 22px 80px rgba(0,0,0,.35);
    }

    /* ===== Footer ===== */
    footer{padding:26px 0}
    .footer-row{display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap}
    .fine{margin-top:12px; color:var(--muted); font-size:12px}

    /* ===== Sticky mobile ===== */
    .stickybar{
      position:fixed; left:16px; right:16px;
      bottom: calc(12px + env(safe-area-inset-bottom));
      z-index:80;
      border:1px solid var(--border);
      background:rgba(255,255,255,.92);
      backdrop-filter: blur(12px);
      border-radius:22px;
      padding:8px;
      box-shadow: 0 20px 70px rgba(11,15,23,.16);
      display:flex; gap:8px;
    }
    .spacer{height: calc(86px + env(safe-area-inset-bottom));}

    /* Toast */
    .toast-wrap{
      position:fixed;
      left:16px; right:16px;
      bottom: calc(12px + env(safe-area-inset-bottom));
      z-index:260;
      display:grid;
      place-items:center;
      pointer-events:none;
    }
    .toast{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-radius:18px;
      border:1px solid rgba(230,232,238,.8);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(12px);
      box-shadow: 0 20px 70px rgba(11,15,23,.16);
      color:var(--ink);
      font-weight:950;
      letter-spacing:-0.01em;
      opacity:0;
      transform: translateY(10px);
      transition: opacity .22s var(--ease), transform .22s var(--ease);
      max-width:min(560px, 100%);
    }
    .toast.on{opacity:1; transform: translateY(0px)}
    .toast .small{font-weight:800; color:var(--muted); font-size:12px}

    /* Modal (lightbox) */
    .modal{
      position:fixed;
      inset:0;
      background: rgba(11,15,23,.72);
      backdrop-filter: blur(10px);
      z-index:200;
      display:none;
      padding:18px;
    }
    .modal.on{display:grid; place-items:center}
    .modal-card{
      width:min(980px, 100%);
      background:#fff;
      border-radius:26px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 32px 120px rgba(0,0,0,.45);
      position:relative;
    }
    .modal-card img{display:block; width:100%; height:auto}
    .modal-close{
      position:absolute; top:12px; right:12px;
      width:44px; height:44px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      cursor:pointer;
      display:grid; place-items:center;
      font-weight:950;
    }

    /* Responsive */
    @media (min-width: 860px){
      nav{display:flex}
      .header-phone{display:inline-flex}
      .hero-grid{grid-template-columns: 1.08fr .92fr; gap:34px}
      .grid{grid-template-columns:repeat(4,1fr); gap:18px}
      .trust{grid-template-columns:repeat(3,1fr)}
      .stickybar, .spacer{display:none}
      .order-wrap{grid-template-columns: 1.05fr .95fr}
      .reviews-grid{grid-template-columns: 1.2fr .8fr}
    }

    @media (max-width: 860px){
      .brand img{width:78px; height:78px}
      /* чистая шапка на мобиле */
      #waTop { display:none !important; }
      #order{ padding-bottom: calc(56px + 110px + env(safe-area-inset-bottom)); }
      .mini-grid{grid-template-columns:repeat(2, minmax(0, 1fr))}
    }

    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important; scroll-behavior:auto !important;}
      .reveal{opacity:1 !important; transform:none !important;}
    }
  </style>
</head>

<body>
  <header>
    <div class="container">
      <div class="header-row">
        <div class="brand">
          <img src="logo.png" alt="Логотип" decoding="async">
        </div>

        <nav>
          <a href="#price">Прайс</a>
          <a href="#order">Заказ</a>
          <a href="#trust">Почему доверяют</a>
          <a href="#departments">Отделы</a>
          <a href="#delivery">Доставка</a>
        </nav>

        <div class="header-actions">
          <a class="header-phone" href="tel:+79104788080">+7 910 478-80-80</a>
          <a class="btn btn-secondary" id="waTop" href="#" target="_blank" rel="noreferrer">WhatsApp</a>
          <a class="btn btn-primary" href="https://t.me/+epLhD48KRgg3YzZi" target="_blank" rel="noreferrer">Telegram</a>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="blob1"></div>
      <div class="blob2"></div>

      <div class="container">
        <div class="hero-grid">
          <div class="reveal">
            <div class="pillbar">
              <span class="pill">Москва</span>
              <span class="pill">МО</span>
              <span class="pill">Троицк</span>
              <span class="pill">Новые Ватутинки</span>
              <span class="pill"><span class="dot"></span>Документы: по запросу</span>
            </div>

            <h1 style="margin-top:14px">
              Камчатская <span class="grad">красная икра</span><br>
              высшей категории
            </h1>

            <p class="lead">
              Родом с Камчатки — знаем продукт по делу: зерно, вкус, солёность и хранение.
              Горбуша • Кета • Кижуч • Нерка <b>(по наличию)</b>.
            </p>

            <div class="pillbar" id="availBar" aria-label="Наличие сегодня"></div>

            <div class="cta-row">
              <a class="btn btn-primary" href="#order">Оформить заявку</a>
              <a class="btn btn-secondary" href="#price">Смотреть прайс</a>
              <button class="btn btn-ghost" id="copyPriceTop" type="button">Скопировать прайс</button>
            </div>
          </div>

          <div class="visual reveal delay-1">
            <div style="display:flex; justify-content:space-between; align-items:center; font-size:var(--fs-mini); font-weight:900; letter-spacing:-0.005em; color:var(--muted)">
              <div>Крупное зерно • Чистый вкус</div>
              <div class="dot"></div>
            </div>

            <img class="hero-photo lb" id="heroPhoto" src="hero.webp" alt="Красная икра" loading="eager" decoding="async"
              data-lightbox="hero.webp"
              onerror="this.style.display='none'; this.insertAdjacentHTML('afterend','<div style=&quot;margin-top:12px;height:460px;border-radius:28px;border:1px solid var(--border);background:var(--soft);display:grid;place-items:center;color:var(--muted);font-weight:900&quot;>hero.webp не найден — положи файл рядом с index.html</div>');"/>

            <div class="mini-grid" aria-label="Информация">
              <div class="mini"><div class="t">Контакт</div><div class="v">+7 910 478-80-80</div></div>
              <div class="mini"><div class="t">Формат</div><div class="v">Самовывоз / доставка</div></div>
              <div class="mini"><div class="t">Оперативно</div><div class="v">Подтверждаем наличие</div></div>
            </div>
          </div>
        </div>

        <!-- GALLERY (3 photos) -->
        <div class="gallery reveal delay-2">
          <div style="margin-top:8px">
            <div class="kicker">Витрина</div>
            <h2 style="margin-top:10px">Как выглядит продукт</h2>
            <p class="sub">3 фото — один стиль. Нажмите, чтобы открыть крупно.</p>
          </div>

          <div class="gallery-grid">
            <div class="gcard lb" data-lightbox="g1.webp" aria-label="Фото 1">
              <div class="gmedia"><img src="g1.webp" alt="Фото 1" loading="lazy" decoding="async"></div>
              <div class="gcap"><div class="t">Фото 1</div><div class="dot"></div></div>
            </div>
            <div class="gcard lb" data-lightbox="g2.webp" aria-label="Фото 2">
              <div class="gmedia"><img src="g2.webp" alt="Фото 2" loading="lazy" decoding="async"></div>
              <div class="gcap"><div class="t">Фото 2</div><div class="dot"></div></div>
            </div>
            <div class="gcard lb" data-lightbox="g3.webp" aria-label="Фото 3">
              <div class="gmedia"><img src="g3.webp" alt="Фото 3" loading="lazy" decoding="async"></div>
              <div class="gcap"><div class="t">Фото 3</div><div class="dot"></div></div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- PRICE -->
    <section id="price" class="section soft divider reveal">
      <div class="container">
        <div class="row-between">
          <div>
            <div class="kicker">Прайс</div>
            <h2 style="margin-top:10px">Две линии фасовки — выберите формат</h2>
            <p class="sub">
              Линия 1 — аккуратные банки. Линия 2 — выгоднее по цене за счёт упаковки.
              Нерка — по наличию.
            </p>
          </div>

          <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap">
            <div class="tabs" role="tablist" aria-label="Линии фасовки">
              <button class="tab active" data-line="line1" type="button" role="tab" aria-selected="true">Линия 1</button>
              <button class="tab" data-line="line2" type="button" role="tab" aria-selected="false">Линия 2</button>
            </div>
            <button class="btn btn-ghost" type="button" id="copyPrice">Скопировать прайс</button>
          </div>
        </div>

        <div style="margin-top:18px; color:var(--muted); font-weight:850; letter-spacing:-0.01em" id="lineTitle"></div>
        <div class="grid" id="priceGrid" style="margin-top:14px"></div>

        <div class="note" style="margin-top:16px">
          <div class="icon">!</div>
          <div>
            <div class="h">Самовывоз / доставка — по договорённости</div>
            <div class="d">Москва • МО • Троицк • Новые Ватутинки. Напишите — подберём фасовку и время.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ORDER + CART -->
    <section id="order" class="section divider reveal">
      <div class="container">
        <div class="kicker">Быстрый заказ</div>
        <h2 style="margin-top:10px">Добавляйте позиции в корзину — и отправляйте одним сообщением</h2>
        <p class="sub">Выберите вид/фасовку/количество → нажмите “Добавить в корзину”. Можно несколько видов сразу.</p>

        <div class="order-wrap">
          <!-- LEFT: pick item -->
          <div class="panel reveal delay-1">
            <h3>Выбор позиции</h3>
            <div class="hint">Соберите корзину: горбуша + кета + кижуч — как нужно.</div>

            <div class="form">
              <div class="field">
                <div class="label">Линия</div>
                <select id="fLine">
                  <option value="line1">Линия 1 — фирменная фасовка</option>
                  <option value="line2">Линия 2 — свежая фасовка</option>
                </select>
              </div>

              <div class="field">
                <div class="label">Вид</div>
                <select id="fFish">
                  <option value="gorb">Икра горбуши</option>
                  <option value="keta">Икра кеты</option>
                  <option value="kizh">Икра кижуча</option>
                  <option value="nerka">Икра нерки (по наличию)</option>
                </select>
              </div>

              <div class="field">
                <div class="label">Фасовка</div>
                <select id="fSize"></select>
              </div>

              <div class="field">
                <div class="label">Количество банок</div>
                <input id="fQty" type="number" min="1" step="1" value="" placeholder="1" inputmode="numeric"/>
              </div>
            </div>

            <div class="summary">
              <div class="total">
                <div class="t">Цена за 1</div>
                <div class="v" id="fUnit">—</div>
              </div>
              <div class="total">
                <div class="t">Сумма позиции</div>
                <div class="v" id="fLineTotal">—</div>
              </div>
            </div>

            <div class="actions-row">
              <button class="btn btn-primary" id="addToCart" type="button">Добавить в корзину</button>
              <button class="btn btn-ghost" id="clearCart" type="button">Очистить корзину</button>
            </div>

            <div class="hint" style="margin-top:10px">Нерка может быть “Уточнить” — добавляйте, мы подтвердим наличие.</div>
          </div>

          <!-- RIGHT: cart + send -->
          <div class="panel reveal delay-2">
            <h3>Корзина</h3>
            <div class="hint">Позиции можно менять: + / − / удалить. Комментарий добавится ко всему заказу.</div>

            <div id="cartList" class="cart" aria-label="Корзина"></div>

            <div class="summary">
              <div class="total">
                <div class="t">Итого корзины</div>
                <div class="v" id="cartTotal">—</div>
              </div>
            </div>

            <div class="field" style="margin-top:12px">
              <div class="label">Район / комментарий</div>
              <input id="fComment" maxlength="160" placeholder="Например: Троицк, завтра, на подарок"/>
            </div>

            <div class="channel">
              <div class="kicker" style="margin:0">Канал</div>
              <div class="seg" role="tablist" aria-label="Канал отправки">
                <button id="chWA" class="active" type="button" role="tab" aria-selected="true">WhatsApp</button>
                <button id="chTG" type="button" role="tab" aria-selected="false">Telegram</button>
              </div>
            </div>

            <div class="actions-row">
              <a class="btn btn-primary" id="sendMain" href="#" target="_blank" rel="noreferrer">Отправить корзину</a>
              <button class="btn btn-ghost" id="copyOrder" type="button">Скопировать заказ</button>
            </div>

            <div class="note" style="margin-top:14px">
              <div class="icon">✓</div>
              <div>
                <div class="h">Подтверждаем наличие</div>
                <div class="d">Проверим выбранные позиции и ответим по времени.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TRUST -->
    <section id="trust" class="section soft divider reveal">
      <div class="container">
        <div class="kicker">Почему доверяют</div>
        <h2 style="margin-top:10px">Минимум слов — максимум уверенности</h2>
        <p class="sub">Без лишнего: происхождение, хранение, документы.</p>

        <div class="trust">
          <div class="trust-item reveal delay-1">
            <div class="t">Камчатка</div>
            <div class="v">Родом с Камчатки</div>
            <div class="d">Понимаем, какая должна быть икра по качеству и зерну.</div>
          </div>
          <div class="trust-item reveal delay-2">
            <div class="t">Хранение</div>
            <div class="v">Контроль свежести</div>
            <div class="d">Соблюдаем условия хранения и логистику.</div>
          </div>
          <div class="trust-item reveal delay-3">
            <div class="t">Документы</div>
            <div class="v">По запросу</div>
            <div class="d">Покажем перед покупкой — спокойно и честно.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- REVIEWS -->
    <section id="reviews" class="section divider reveal">
      <div class="container">
        <div class="kicker">Отзывы</div>
        <h2 style="margin-top:10px">Скоро появятся первые отзывы</h2>
        <p class="sub">Мы не рисуем “фейки”. После первых заказов здесь будут реальные отзывы клиентов.</p>

        <div class="reviews-grid">
          <div class="review-card reveal delay-1">
            <div class="review-head">
              <div style="font-weight:950; letter-spacing:-0.02em">Первые отзывы — после первых заказов</div>
              <div class="review-badge"><span class="dot warn"></span>в процессе</div>
            </div>
            <div class="hint" style="margin-top:10px">
              Хотите — оставьте отзыв после покупки. Это поможет другим людям выбрать уверенно.
            </div>
          </div>

          <div class="review-card reveal delay-2">
            <div class="review-head">
              <div style="font-weight:950; letter-spacing:-0.02em">Оставить отзыв</div>
              <div class="review-badge"><span class="dot ok"></span>быстро</div>
            </div>
            <div class="hint" style="margin-top:10px">
              Напишите 1–2 предложения: вид икры, фасовка, доставка/самовывоз и впечатление.
            </div>
            <div class="review-actions">
              <a class="btn btn-primary" id="leaveReviewWA" href="#" target="_blank" rel="noreferrer">WhatsApp</a>
              <a class="btn btn-secondary" id="leaveReviewTG" href="#" target="_blank" rel="noreferrer">Telegram</a>
              <button class="btn btn-ghost" id="copyReviewText" type="button">Скопировать текст</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- DEPARTMENTS -->
    <section id="departments" class="section divider reveal">
      <div class="container">
        <div class="kicker">Отделы</div>
        <h2 style="margin-top:10px">Сейчас — красная икра. Остальное — скоро.</h2>
        <p class="sub">Единая витрина: один формат фото, одна типографика, один премиум-стиль.</p>

        <div class="dept-grid">
          <a class="dept-card reveal delay-1" href="#price" aria-label="Красная икра">
            <div class="dept-media pos-top">
              <span class="dept-badge live"><span class="dot"></span>готово</span>
              <img src="hero.webp" alt="Красная икра" loading="lazy" decoding="async">
            </div>
            <div class="dept-body">
              <div>
                <h3 class="dept-title">Красная икра</h3>
                <p class="dept-desc">Прайс + быстрый заказ. Подтверждаем наличие и время.</p>
              </div>
              <div class="dept-footer">
                <div class="dept-status"><span class="dot ok"></span>Открыть</div>
                <div class="dept-arrow" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M5 12h12M13 6l6 6-6 6" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </a>

          <div class="dept-card soon reveal delay-2" aria-label="Чёрная икра (скоро)">
            <div class="dept-media pos-top">
              <span class="dept-badge"><span class="dot"></span>скоро</span>
              <img src="black.webp" alt="Чёрная икра" loading="lazy" decoding="async">
            </div>
            <div class="dept-body">
              <div>
                <h3 class="dept-title">Чёрная икра</h3>
                <p class="dept-desc">Скоро добавим позиции, фасовку и цены.</p>
              </div>
              <div class="dept-footer">
                <div class="dept-status"><span class="dot warn"></span>В разработке</div>
                <div class="dept-arrow" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M5 12h12M13 6l6 6-6 6" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <div class="dept-card soon reveal delay-3" aria-label="Камчатский краб (скоро)">
            <div class="dept-media pos-top">
              <span class="dept-badge"><span class="dot"></span>скоро</span>
              <img src="crab.webp" alt="Камчатский краб" loading="lazy" decoding="async">
            </div>
            <div class="dept-body">
              <div>
                <h3 class="dept-title">Камчатский краб</h3>
                <p class="dept-desc">Наборы и позиции — в премиум-формате.</p>
              </div>
              <div class="dept-footer">
                <div class="dept-status"><span class="dot warn"></span>В разработке</div>
                <div class="dept-arrow" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M5 12h12M13 6l6 6-6 6" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <div class="dept-card soon reveal" aria-label="Морепродукты (скоро)">
            <div class="dept-media pos-low">
              <span class="dept-badge"><span class="dot"></span>скоро</span>
              <img src="seafood.webp" alt="Морепродукты" loading="lazy" decoding="async">
            </div>
            <div class="dept-body">
              <div>
                <h3 class="dept-title">Морепродукты</h3>
                <p class="dept-desc">Креветка, гребешок, рыба и деликатесы.</p>
              </div>
              <div class="dept-footer">
                <div class="dept-status"><span class="dot warn"></span>В разработке</div>
                <div class="dept-arrow" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M5 12h12M13 6l6 6-6 6" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- DELIVERY -->
    <section id="delivery" class="section divider dark reveal">
      <div class="container">
        <div class="row-between" style="align-items:center">
          <div style="max-width:62ch; position:relative">
            <div class="kicker">Доставка</div>
            <h2 style="margin-top:10px">Москва / МО / Троицк / Новые Ватутинки</h2>
            <p class="sub">Самовывоз или доставка — по договорённости. Напишите — подтвердим наличие и время.</p>

            <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap">
              <a class="btn" style="background:#fff;color:var(--ink);border:1px solid #fff; box-shadow:0 18px 55px rgba(0,0,0,.35)"
                 href="tel:+79104788080">Позвонить</a>
              <a class="btn" style="background:#fff;color:var(--ink);border:1px solid #fff; box-shadow:0 18px 55px rgba(0,0,0,.35)"
                 id="waBottom" href="#" target="_blank" rel="noreferrer">WhatsApp</a>
              <a class="btn" style="background:#fff;color:var(--ink);border:1px solid #fff; box-shadow:0 18px 55px rgba(0,0,0,.35)"
                 href="https://t.me/+epLhD48KRgg3YzZi" target="_blank" rel="noreferrer">Telegram</a>
            </div>
          </div>

          <div class="panel" style="max-width:520px">
            <div style="font-weight:900; color:rgba(255,255,255,.72); letter-spacing:-0.01em">Что написать</div>
            <div style="margin-top:12px; display:grid; gap:10px">
              <div style="border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.15); padding:12px 14px; border-radius:18px; color:rgba(255,255,255,.88)">1) Какие позиции (вид/фасовка)</div>
              <div style="border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.15); padding:12px 14px; border-radius:18px; color:rgba(255,255,255,.88)">2) Количество</div>
              <div style="border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.15); padding:12px 14px; border-radius:18px; color:rgba(255,255,255,.88)">3) Район + когда нужно</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="divider reveal">
    <div class="container">
      <div class="footer-row">
        <div class="brand">
          <img src="logo.png" alt="Логотип" style="width:56px;height:56px;object-fit:contain" decoding="async" onerror="this.style.display='none'">
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center">
          <a class="btn btn-ghost" href="tel:+79104788080">+7 910 478-80-80</a>
          <a class="btn btn-secondary" id="waFooter" href="#" target="_blank" rel="noreferrer">WhatsApp</a>
          <a class="btn btn-primary" href="https://t.me/+epLhD48KRgg3YzZi" target="_blank" rel="noreferrer">Telegram</a>
        </div>
      </div>
      <div class="fine">
        Самовывоз / доставка — по договорённости. Нерка — по наличию.
        <span style="margin-left:10px; opacity:.75" id="buildVersion"></span>
      </div>
    </div>
  </footer>

  <!-- Sticky mobile -->
  <div class="stickybar" aria-label="Быстрые действия">
    <a class="btn btn-primary" style="flex:1" href="https://t.me/+epLhD48KRgg3YzZi" target="_blank" rel="noreferrer">Telegram</a>
    <a class="btn btn-secondary" style="flex:1" id="waSticky" href="#" target="_blank" rel="noreferrer">WhatsApp</a>
    <a class="btn btn-ghost" style="flex:1" href="tel:+79104788080">Позвонить</a>
  </div>
  <div class="spacer"></div>

  <!-- Toast -->
  <div class="toast-wrap" aria-live="polite" aria-atomic="true">
    <div class="toast" id="toast"><span id="toastMsg">Готово</span> <span class="small" id="toastSub"></span></div>
  </div>

  <!-- Lightbox -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Фото">
      <button class="modal-close" id="modalClose" type="button" aria-label="Закрыть">✕</button>
      <img id="modalImg" alt="Фото" src="">
    </div>
  </div>

  <script>
    const TG_INVITE = "https://t.me/+epLhD48KRgg3YzZi";
    const WHATSAPP_PHONE = "79104788080";
    const PHONE_TEL = "+79104788080";

    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));

    function haptic(ms=10){ if (navigator.vibrate) navigator.vibrate(ms); }
    function waLink(text){ return "https://wa.me/" + WHATSAPP_PHONE + "?text=" + encodeURIComponent(text); }
    function tgShareLink(text){ return "https://t.me/share/url?text=" + encodeURIComponent(text); }
    function money(n){
      if (typeof n !== "number") return "Уточнить";
      return n.toLocaleString("ru-RU") + " ₽";
    }

    let toastTimer = null;
    function toast(msg, sub=""){
      const t = $("#toast");
      $("#toastMsg").textContent = msg;
      $("#toastSub").textContent = sub ? "• " + sub : "";
      t.classList.add("on");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> t.classList.remove("on"), 1600);
    }

    async function copyToClipboard(text, okMsg="Скопировано ✅", sub=""){
      try{
        await navigator.clipboard.writeText(text);
        haptic(10);
        toast(okMsg, sub);
        return true;
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position="fixed";
        ta.style.opacity="0";
        document.body.appendChild(ta);
        ta.select();
        try{
          document.execCommand("copy");
          haptic(10);
          toast(okMsg, sub);
          return true;
        }catch(_){
          toast("Не удалось скопировать", "Скопируйте вручную");
          return false;
        }finally{
          ta.remove();
        }
      }
    }

    // ===== Build version (for cache control) =====
    const BUILD = new Date().toISOString().slice(0,16).replace("T"," ");
    $("#buildVersion").textContent = "Версия: " + BUILD;

    // ===== Price data =====
    const PRICE = {
      line1: {
        title: "Линия 1 — Фирменная фасовка",
        items: {
          gorb: { name:"Икра горбуши", sizes: { "200 г":1550, "500 г":3800 } },
          keta: { name:"Икра кеты",     sizes: { "200 г":1800, "500 г":4300 } },
          kizh: { name:"Икра кижуча",   sizes: { "200 г":1800, "500 г":4300 } },
          nerka:{ name:"Икра нерки",    sizes: {} }
        }
      },
      line2: {
        title: "Линия 2 — Свежая фасовка",
        items: {
          gorb: { name:"Икра горбуши", sizes: { "300 г":2200, "500 г":3600 } },
          keta: { name:"Икра кеты",     sizes: { "300 г":2600, "500 г":4200 } },
          kizh: { name:"Икра кижуча",   sizes: { "300 г":2500, "500 г":4100 } },
          nerka:{ name:"Икра нерки",    sizes: {} }
        }
      }
    };

    // ===== Availability =====
    const AVAIL = [
      { name:"Горбуша", status:"ok" },
      { name:"Кета", status:"ok" },
      { name:"Кижуч", status:"ok" },
      { name:"Нерка", status:"warn" }
    ];
    function renderAvail(){
      const bar = $("#availBar");
      bar.innerHTML = "";
      AVAIL.forEach(a => {
        const d = document.createElement("span");
        const dotClass = a.status === "ok" ? "ok" : "warn";
        const label = a.status === "ok" ? "в наличии" : "по наличию";
        d.className = "pill";
        d.innerHTML = `<span class="dot ${dotClass}"></span>${a.name}: ${label}`;
        bar.appendChild(d);
      });
    }

    // ===== WhatsApp quick links =====
    const waHello = "Здравствуйте! Хочу заказать икру. Подскажите наличие и ближайшее время.";
    ["waTop","waBottom","waFooter","waSticky"].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.href = waLink(waHello);
    });

    // ===== Price render =====
    const tabs = $$(".tab");
    const grid = $("#priceGrid");
    const lineTitle = $("#lineTitle");

    function renderPrice(lineKey){
      const d = PRICE[lineKey];
      lineTitle.textContent = d.title;

      const order = ["gorb","keta","kizh","nerka"];
      grid.innerHTML = order.map(k => {
        const item = d.items[k];
        const sizes = item.sizes;
        const keys = Object.keys(sizes);

        const badge = (k === "nerka") ? `<div class="badge">по наличию</div>` : "";
        const rows = keys.length
          ? keys.map(s => `
              <div class="row">
                <div class="w">${s}</div>
                <div class="p">${money(sizes[s])}</div>
              </div>
            `).join("")
          : `
              <div class="row">
                <div class="w">—</div>
                <div class="p">Уточнить</div>
              </div>
            `;

        return `
          <div class="card reveal">
            <div class="title"><span class="dot"></span>${item.name}</div>
            ${badge}
            <div class="rows">${rows}</div>
          </div>
        `;
      }).join("");

      hookRevealForNewNodes();
    }

    tabs.forEach(btn => {
      btn.addEventListener("click", () => {
        tabs.forEach(x => { x.classList.remove("active"); x.setAttribute("aria-selected","false"); });
        btn.classList.add("active");
        btn.setAttribute("aria-selected","true");
        renderPrice(btn.dataset.line);
        syncOrderSizes();
        updatePicker();
      });
    });

    function buildPriceText(){
      const lines = [];
      lines.push("ПРАЙС НА КАМЧАТСКУЮ КРАСНУЮ ИКРУ (Москва)");
      Object.keys(PRICE).forEach(lineKey => {
        const d = PRICE[lineKey];
        lines.push("");
        lines.push(d.title);
        ["gorb","keta","kizh","nerka"].forEach(k => {
          const it = d.items[k];
          lines.push("• " + it.name + (k==="nerka" ? " (по наличию)" : ""));
          const sk = Object.keys(it.sizes);
          if (!sk.length) lines.push("  — Уточнить");
          sk.forEach(s => lines.push(`  ${s} — ${money(it.sizes[s])}`));
        });
      });
      lines.push("");
      lines.push("Телефон: +7 910 478-80-80");
      lines.push("Telegram: " + TG_INVITE);
      lines.push("WhatsApp: https://wa.me/" + WHATSAPP_PHONE);
      return lines.join("\n");
    }

    $("#copyPrice").addEventListener("click", () => copyToClipboard(buildPriceText(), "Прайс скопирован ✅"));
    $("#copyPriceTop").addEventListener("click", () => copyToClipboard(buildPriceText(), "Прайс скопирован ✅"));

    // ===== Picker + Cart =====
    const fLine = $("#fLine");
    const fFish = $("#fFish");
    const fSize = $("#fSize");
    const fQty = $("#fQty");
    const fComment = $("#fComment");

    const fUnit = $("#fUnit");
    const fLineTotal = $("#fLineTotal");

    const cartList = $("#cartList");
    const cartTotalEl = $("#cartTotal");

    const addToCartBtn = $("#addToCart");
    const clearCartBtn = $("#clearCart");

    const chWA = $("#chWA");
    const chTG = $("#chTG");
    const sendMain = $("#sendMain");
    const copyOrderBtn = $("#copyOrder");

    let channel = "wa";
    let cart = [];

    function setChannel(next){
      channel = next;
      chWA.classList.toggle("active", channel === "wa");
      chTG.classList.toggle("active", channel === "tg");
      chWA.setAttribute("aria-selected", channel === "wa" ? "true" : "false");
      chTG.setAttribute("aria-selected", channel === "tg" ? "true" : "false");
      updateSendLinks();
    }
    chWA.addEventListener("click", () => setChannel("wa"));
    chTG.addEventListener("click", () => setChannel("tg"));

    function syncOrderSizes(){
      const lineKey = fLine.value;
      const fishKey = fFish.value;
      const sizes = PRICE[lineKey].items[fishKey].sizes;
      const keys = Object.keys(sizes);

      fSize.innerHTML = "";
      if (!keys.length){
        const opt = document.createElement("option");
        opt.value = "";
        opt.textContent = "Уточнить наличие/фасовку";
        fSize.appendChild(opt);
        return;
      }
      keys.forEach(k => {
        const opt = document.createElement("option");
        opt.value = k;
        opt.textContent = k;
        fSize.appendChild(opt);
      });
    }

    function unitPriceFor(lineKey, fishKey, size){
      if (!size) return null;
      const n = PRICE[lineKey].items[fishKey].sizes[size];
      return (typeof n === "number") ? n : null;
    }

    function getQty(){
      const raw = (fQty.value || "").trim();
      if (raw === "") return 1;
      let q = parseInt(raw, 10);
      if (!Number.isFinite(q)) return 1;
      if (q < 1) q = 1;
      if (q > 99) q = 99;
      return q;
    }
    function normalizeQtyOnBlur(){
      fQty.value = String(getQty());
    }

    function updatePicker(){
      const lineKey = fLine.value;
      const fishKey = fFish.value;
      const size = fSize.value;
      const qty = getQty();
      const u = unitPriceFor(lineKey, fishKey, size);

      fUnit.textContent = (u === null) ? "Уточнить" : money(u);
      fLineTotal.textContent = (u === null) ? "Уточнить" : money(u * qty);

      updateSendLinks();
    }

    function lineName(lineKey){ return PRICE[lineKey].title; }
    function fishName(lineKey, fishKey){ return PRICE[lineKey].items[fishKey].name; }

    function cartLineTotal(item){
      if (item.unit === null) return null;
      return item.unit * item.qty;
    }

    function cartTotal(){
      let sum = 0;
      for (const it of cart){
        const t = cartLineTotal(it);
        if (t === null) return null;
        sum += t;
      }
      return sum;
    }

    function renderCart(){
      if (!cart.length){
        cartList.innerHTML = `<div class="cart-empty">Корзина пустая. Добавьте позиции слева.</div>`;
      }else{
        cartList.innerHTML = cart.map((it, idx) => {
          const total = cartLineTotal(it);
          const totalStr = (total === null) ? "Уточнить" : money(total);
          const unitStr = (it.unit === null) ? "Уточнить" : money(it.unit);

          return `
            <div class="cart-item" data-idx="${idx}">
              <div class="cart-left">
                <div class="cart-name">${it.fish} — ${it.size || "Уточнить"}</div>
                <div class="cart-meta">
                  <span>${it.line}</span>
                  <span>•</span>
                  <span>за 1: ${unitStr}</span>
                  <span>•</span>
                  <span>сумма: ${totalStr}</span>
                </div>
              </div>

              <div class="cart-right">
                <div class="qty" aria-label="Количество">
                  <button class="qbtn" data-act="dec" type="button" aria-label="Минус">−</button>
                  <div class="qnum">${it.qty}</div>
                  <button class="qbtn" data-act="inc" type="button" aria-label="Плюс">+</button>
                </div>
                <button class="delbtn" data-act="del" type="button" aria-label="Удалить">✕</button>
              </div>
            </div>
          `;
        }).join("");
      }

      const total = cartTotal();
      cartTotalEl.textContent = (total === null) ? (cart.length ? "Уточнить" : "—") : money(total);

      updateSendLinks();
    }

    cartList.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      const wrap = e.target.closest(".cart-item");
      if (!wrap) return;

      const idx = parseInt(wrap.getAttribute("data-idx"), 10);
      if (!Number.isFinite(idx) || !cart[idx]) return;

      const act = btn.getAttribute("data-act");
      if (act === "inc"){
        cart[idx].qty = Math.min(99, cart[idx].qty + 1);
        haptic(8);
      }else if (act === "dec"){
        cart[idx].qty = Math.max(1, cart[idx].qty - 1);
        haptic(8);
      }else if (act === "del"){
        cart.splice(idx, 1);
        haptic(12);
        toast("Позиция удалена", "");
      }
      renderCart();
    });

    function addToCart(){
      const lineKey = fLine.value;
      const fishKey = fFish.value;
      const size = fSize.value;
      const qty = getQty();
      const u = unitPriceFor(lineKey, fishKey, size);

      const item = {
        lineKey,
        fishKey,
        size,
        qty,
        unit: u,
        line: lineName(lineKey),
        fish: fishName(lineKey, fishKey)
      };

      // merge: если такая же позиция уже есть — складываем количество
      const sameIdx = cart.findIndex(x =>
        x.lineKey === item.lineKey &&
        x.fishKey === item.fishKey &&
        x.size === item.size
      );
      if (sameIdx >= 0){
        cart[sameIdx].qty = Math.min(99, cart[sameIdx].qty + item.qty);
        toast("Добавлено", "объединили в одну позицию");
      }else{
        cart.push(item);
        toast("Добавлено в корзину ✅", "");
      }

      haptic(12);
      renderCart();
    }

    addToCartBtn.addEventListener("click", addToCart);

    clearCartBtn.addEventListener("click", () => {
      cart = [];
      haptic(16);
      toast("Корзина очищена", "");
      renderCart();
    });

    function buildCartText(){
      const comment = (fComment.value || "").trim();
      const total = cartTotal();

      const parts = [];
      parts.push("Здравствуйте! Хочу оформить заказ:");

      if (!cart.length){
        parts.push("");
        parts.push("Корзина пустая. Подскажите, пожалуйста, что есть в наличии сегодня.");
      }else{
        parts.push("");
        cart.forEach((it, i) => {
          const t = cartLineTotal(it);
          const tStr = (t === null) ? "Уточнить" : money(t);
          const uStr = (it.unit === null) ? "Уточнить" : money(it.unit);
          parts.push(`${i+1}) ${it.fish} — ${it.line} — ${it.size || "Уточнить"} — ${it.qty} шт — ${tStr} (за 1: ${uStr})`);
        });
        parts.push("");
        parts.push("Итого: " + (total === null ? "Уточнить" : money(total)));
      }

      if (comment) parts.push("Комментарий: " + comment);
      parts.push("Контакт: " + PHONE_TEL);
      parts.push("");
      parts.push("Подскажите наличие и ближайшее время, пожалуйста.");
      return parts.join("\n");
    }

    function updateSendLinks(){
      const text = buildCartText();
      if (channel === "wa"){
        sendMain.textContent = "Отправить корзину в WhatsApp";
        sendMain.href = waLink(text);
      }else{
        sendMain.textContent = "Отправить корзину в Telegram";
        sendMain.href = tgShareLink(text);
      }
    }

    copyOrderBtn.addEventListener("click", async () => {
      await copyToClipboard(buildCartText(), "Заказ скопирован ✅", "Вставьте в чат");
    });

    // Picker events
    fLine.addEventListener("change", () => { syncOrderSizes(); updatePicker(); });
    fFish.addEventListener("change", () => { syncOrderSizes(); updatePicker(); });
    fSize.addEventListener("change", updatePicker);
    fQty.addEventListener("input", updatePicker);
    fQty.addEventListener("blur", () => { normalizeQtyOnBlur(); updatePicker(); });
    fComment.addEventListener("input", updateSendLinks);

    // ===== Reviews: leave review =====
    const reviewText =
`Здравствуйте! Хочу оставить отзыв:

• Что брали (вид/фасовка):
• Количество:
• Доставка/самовывоз (район):
• Впечатление (вкус/зерно/соль):

Спасибо!`;

    const leaveReviewWA = $("#leaveReviewWA");
    const leaveReviewTG = $("#leaveReviewTG");
    const copyReviewText = $("#copyReviewText");

    leaveReviewWA.href = waLink(reviewText);
    leaveReviewTG.href = tgShareLink(reviewText);

    copyReviewText.addEventListener("click", async () => {
      await copyToClipboard(reviewText, "Текст отзыва скопирован ✅");
    });

    // ===== Lightbox (hero + gallery) =====
    const modal = $("#modal");
    const modalImg = $("#modalImg");
    const modalClose = $("#modalClose");

    function openModal(src){
      if (!src) return;
      modal.classList.add("on");
      modal.setAttribute("aria-hidden","false");
      modalImg.src = src;
      document.body.style.overflow = "hidden";
    }
    function closeModal(){
      modal.classList.remove("on");
      modal.setAttribute("aria-hidden","true");
      modalImg.src = "";
      document.body.style.overflow = "";
    }

    function hookLightbox(){
      $$(".lb").forEach(el => {
        el.addEventListener("click", () => {
          const src = el.getAttribute("data-lightbox");
          openModal(src);
        });
      });
    }

    modalClose.addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeModal(); });

    // ===== Premium scroll reveal =====
    let revealObserver = null;

    function createRevealObserver(){
      if (window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches){
        $$(".reveal").forEach(el => el.classList.add("in"));
        return null;
      }
      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting){
            entry.target.classList.add("in");
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12, rootMargin: "0px 0px -6% 0px" });

      $$(".reveal").forEach(el => io.observe(el));
      return io;
    }

    function hookRevealForNewNodes(){
      if (!revealObserver) return;
      $$(".reveal:not(.in)").forEach(el => { try{ revealObserver.observe(el); }catch(e){} });
    }

    // ===== Init =====
    function init(){
      renderAvail();
      renderPrice("line1");
      syncOrderSizes();
      updatePicker();

      // start with empty cart
      renderCart();

      hookLightbox();
      revealObserver = createRevealObserver();
      hookRevealForNewNodes();
    }

    init();
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "name":"Камчатская красная икра",
    "telephone":"+7 910 478-80-80",
    "areaServed":["Москва","Московская область","Троицк","Новые Ватутинки"]
  }
  </script>
</body>
</html>
